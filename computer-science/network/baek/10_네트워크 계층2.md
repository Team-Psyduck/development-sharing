# 네트워크계층 2

## IP 헤더에 대해 알아보자

ip프로토콜 버전 정보

length : 패킷의 전체 길이 

source IP address : 메세지를 생성해서 보내느사람의 IP 주소

destination IP address : 최종 목적지 호스트의 IP 주소

checksum : 에러 검출

time to live : 줄여서 ttl이라고 한다. 적힌 숫자가 있는데 라우터를 거칠때마다 -1씩 해서 업데이트 해준다. 

upper layer : data 부분에 들어가는게 TCP인지 UDP인지 적혀있음 (receiver 측에서 사용함)

## IP Address

32비트 구조체계를 가진다. 그래서 2의 32승 갯수만큼 ip주소를 가질 수 있다. 

ip는 호스트에 들어있는 네트워크 인터페이스를 지칭하는 주소이다. 현재 32비트 체계를 사용하면서 사람이 읽기쉽게 8비트씩 끊어서 10진수씩 읽고 있다. 

### ip주소가 배정되는 방식

막무가내 배정을 하게 된다면, forwarding table의 크기가 어마하게 커진다. 

ip 주소는  계층화를 시켜서 관리한다. 

32비트 ip주소 공간은 두공간으로 나뉜다. 

앞부분은 네트워크 아이디 뒷부분은 그네트워크에 속한 호스트아이디 

네트워크 아이디 =프리픽스 = 서브넷 아이디 (다 앞부분을 칭하는 말이다.) 아이피 주소와 서브넷 마스크는 항상 함께 다닌다. 

현재 ip주소는 같은 네트워크에 속한 호스트들은 같은 프리픽스 즉, 같은 네트워크 아이디 또는 서브넷 아이디를 가지는 Ip주소를 가지고 있다. 

## Subnets

서브넷이란 같은 프리픽스를 가진 디스이스의 집합이다. 

서브넷은 라우터를 거치지 않고 접근 가능한 호스트들의 집합이다. 

라우터의 특징

여러개의 ip주소를 갖는다 ip주소의 프리픽스가 다 틀리다. → 여러개의 서브넷에 속한 걸쳐있는 교집합이다. 

## ip.4 → ip.6

32 비트에서 128비트로 변경 되었다. 

## NAT(Network Address Translation)

32비트개의 ip주소는 전세계 사람들이 사용하기에는 부족하다 그래서 ip. 버전 6를 출시했다. 하지만, 아직까지도 우리는 ip 4 버전을 사용한다. 이유가 뭘까?

NAT라는 방법 덕분에 우리가 ip4버전을 계속 사용하는것이다. 

즉, ip를 재활용하며 사용하고 있다.
